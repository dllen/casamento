var categoriaAtual=null;var categoriaCmb={nome:"cmb",quantidade:9};var categoriaEletro={nome:"eletro",quantidade:12};var categoriaUtils={nome:"utils",quantidade:12};var categorias=[categoriaCmb,categoriaEletro,categoriaUtils];var quantidadeCategorias=categorias.length;var spinner=$("#spinner-presentes");var containerInicial=$("#container-presentes");var containerMaisPresentes=$("#mais-presentes");var quantidadeTotal=0;function cargaInicialDePresentes(){$("#casasfreitas").popover({template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content">Av. Dom Luís, 281 <br/> <a href="http://www.casafreitas.com.br/site/lojas" target="_blank">Ver todos</a></div></div>'});$("#paypal").popover({template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content">PayPal é um sistema que permite a transferência de dinheiro entre indivíduos ou negociantes usando um endereço de e-mail, evitando métodos tradicionais como cheques e boleto bancário.<br/> <a href="https://www.paypal.com/br/webapps/mpp/escolher-paypal" target="_blank">Saber mais</a></div></div>'});configurarCategorias();requisitarPresentes(containerInicial,"",0,6)}function carregarMaisPresentes(){containerMaisPresentes.hide();spinner.show();categoriaAtual=obterCategoriaAtual();var b=obterQuantidadeExibida();var a=(Math.ceil(b/3)*3)-b;if(a===0){a=3}requisitarPresentes(containerMaisPresentes,"",0,a)}function configurarCategorias(){configurarCategoria(categoriaCmb);configurarCategoria(categoriaEletro);configurarCategoria(categoriaUtils)}function configurarCategoria(b){b.itensRestantes=[];for(var a=1;a<=b.quantidade;a++){b.itensRestantes.push(a)}shuffle(b.itensRestantes)}function obterQuantidadeExibida(){return $("#lista-presentes").children(":visible").length}function obterCategoriaAtual(){var a=$("a.active").data("filter");return obterCategoriaPor(a)}function requisitarPresentes(a,c,e,f){var d;try{d=categoriaAtual===null?obterPresente():obterPresenteDaCategoria(categoriaAtual)}catch(b){exibirPresentes(a,c);return}$.ajax({url:d.url,dataType:"html",success:function(g){e+=1;c=c+g;d.categoria.itensRestantes.shift();if(e<f){requisitarPresentes(a,c,e,f)}else{exibirPresentes(a,c)}},error:function(){requisitarPresentes(a,c,e,f)}})}function exibirPresentes(a,b){spinner.hide();$(b).appendTo("."+a.data("destination"));setTimeout(function(){configurarVisibilidadeBotao(categoriaAtual===null?"todos":categoriaAtual.nome)},700)}function obterPresente(){var a=obterCategoria();return obterPresenteDaCategoria(a)}function obterPresenteDaCategoria(c){if(c.itensRestantes.length<=0){throw"Não há mais presentes"}var b=c.nome;var a=c.itensRestantes[0];return{url:"pages/presentes/"+b+"/item"+a+".html",id:a,categoria:c}}function obterCategoria(){var a=Math.floor((Math.random()*quantidadeCategorias)+1)-1;var c=categorias[a];var b=1;while(c.itensRestantes.length===0){b+=1;if(b>quantidadeCategorias){throw"Não há mais presentes"}a+=1;c=categorias[a%quantidadeCategorias]}return c}function obterCategoriaPor(a){switch(a){case"cmb":return categoriaCmb;case"utils":return categoriaUtils;case"eletro":return categoriaEletro;default:return null}}function configurarVisibilidadeBotao(a){var c=true;var d=obterCategoriaPor(a);if(d!==null){c=d.itensRestantes.length>0}else{c=false;for(var b=0;b<categorias.length;b++){if(categorias[b].itensRestantes.length>0){c=true;break}}}if(c){containerMaisPresentes.show()}else{containerMaisPresentes.hide()}};